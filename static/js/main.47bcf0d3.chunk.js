(this.webpackJsonpundefined=this.webpackJsonpundefined||[]).push([[0],{153:function(e,t,r){},159:function(e,t,r){},162:function(e,t,r){},163:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(22),c=r.n(o),i=(r(71),r(2)),s=r(3),u=r(1),l=r(11),p=r(61),f=r.n(p),h=r(62),d=r.n(h);var b=r(4);function m(e){return e.reduce((function(e,t){var r=Symbol(t);return e[t]=r,e[r]=t,e}),{})}var v=m(["pencil","eraser","darken","lighten","invert","mix","bucket","dropper"]),g=["square","circle","triangle","pentagon","hexagon","octagon"];g.push.apply(g,Object(b.a)(g.map((function(e){return e+"Outline"}))));var y=m(g),O={none:0,vertical:Math.pow(2,0),horizontal:Math.pow(2,1),both:Math.pow(2,0)+Math.pow(2,1),0:"none",1:"vertical",2:"horizontal",3:"both"};function j(e,t){for(var r=Object(u.a)(e,2),n=r[0],a=r[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,c=[],i=0;i<t;i++)for(var s=0;s<o;s++)c.push([Math.floor(n-o/2+s),Math.floor(a-t/2+i)]);return c}function P(e,t){for(var r=Object(u.a)(e,2),n=r[0],a=r[1],o=[],c=t/2,i=0;i<t;i++)for(var s=0;s<t;s++){var l=s-c+.5,p=i-c+.5;Math.pow(l,2)+Math.pow(p,2)<Math.pow(c,2)&&o.push([Math.floor(n-c+s),Math.floor(a-c+i)])}return o}function k(e,t,r){for(var n=Object(u.a)(e,2),a=n[0],o=n[1],c=[],i=t/2,s=2*Math.PI/r,l=i*Math.cos(s/2),p=0;p<t;p++)for(var f=0;f<t;f++){var h=f-i+.5,d=p-i+.5,b=Math.abs((2.5*Math.PI+Math.atan2(d,h))%s-s/2),m=l/Math.cos(b);Math.pow(h,2)+Math.pow(d,2)<Math.pow(m,2)&&c.push([Math.floor(a-i+f),Math.floor(o-i+p)])}return c}function w(e,t){var r=Object.assign({},e);return Object.keys(t).forEach((function(e){return delete r[e]})),r}function x(e){return e.split(",").map(Number)}function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return 1};return e.reduce((function(e,r){return e[r]=t(r),e}),{})}function S(e){return Object.keys(e).map(x)}function C(e){return Object.entries(e).reduce((function(e,t){var r=Object(u.a)(t,2),n=r[0],a=r[1];return(e[a]||(e[a]=[])).push(n),e}),{})}function M(e){return Object.entries(e).reduce((function(e,t){var r=Object(u.a)(t,2),n=r[0];return r[1].reduce((function(e,t){return e[t]=n,e}),e)}),{})}function z(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0,n=Object(u.a)(r,2),a=n[0],o=n[1];return Object.entries(e).reduce((function(e,r){var n=Object(u.a)(r,2),c=n[0],i=n[1],s=c.split(",").map(Number),l=Object(u.a)(s,2),p=l[0],f=l[1];return e[t?[o-f-1,p]:[f,a-p-1]]=i,e}),{})}function D(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0,n=Object(u.a)(r,2),a=n[0],o=n[1];return Object.entries(e).reduce((function(e,r){var n=Object(u.a)(r,2),c=n[0],i=n[1],s=c.split(",").map(Number),l=Object(u.a)(s,2),p=l[0],f=l[1];return e[[t?p:a-p-1,t?o-f-1:f]]=i,e}),{})}function K(e,t,r,n){var a=Object(u.a)(n,2),o=a[0],c=a[1],i=e[t];return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){return e.toString()},a={},o=[e],c=[];function i(e){a[n(e)]=!0}function s(e){return a[n(e)]}for(;o.length;){var u=o.shift();!s(u)&&r(u)&&(c.push(u),o.push.apply(o,Object(b.a)(t(u)))),i(u)}return c}(t,(function(e){var t=Object(u.a)(e,2),r=t[0],n=t[1];return[[r,n-1],[r,n+1],[r-1,n],[r+1,n]]}),(function(t){var r=Object(u.a)(t,2),n=r[0],a=r[1];return n>=0&&n<o&&a>=0&&a<c&&e[[n,a]]===i})).reduce((function(e,t){return e[t]=r,e}),Object.assign({},e))}var N=[0,30,45,60,90,120,180],R=m(["flipVertically","flipHorizontally","previousColor","nextColor","rotateCounterClockwise","rotateClockwise","clear","undo","redo"]),B=m(["mode","brush","nextBrush","previousBrush","tool","mirror","size","stroke","rotationalSymmetry","nextSymmetry","previousSymmetry","background"]);function I(e){return{type:B.mirror,payload:e}}function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){Object(s.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var U={mode:v.pencil,brush:y.square,mirror:O.none,rotationalSymmetry:!1,size:1,stroke:1,background:"#3b3b3b"},A=m(["color","setPaletteColor","fromPalette"]);function T(e){return{type:A.fromPalette,payload:e}}function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){Object(s.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var H={palette:["#ff0000","#ffa200","#eeff00","#44ff00","#00ffee","#0400ff","#a600ff","#ff00ea","#000000","#ffffff"],paletteIndex:0};function V(e,t,r){var n=e.slice();return n[t]=r,n}var Q=m(["pixelClicked","resize","resetSize","bucket","setPxl","setPxls","clearPxl","clearPxls"]);function J(e){return{type:Q.resize,payload:e}}function X(e){return{type:Q.setPxls,payload:e}}function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach((function(t){Object(s.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var G={width:24,height:24,pxls:{}},Z=[],$=0;function ee(e){return Object.entries(e).filter((function(e){var t=Object(u.a)(e,2);t[0];return null!==t[1]})).reduce((function(e,t){var r=Object(u.a)(t,2),n=r[0],a=r[1];return e[n]=a,e}),{})}var te=Object(l.c)({config:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B.background:return _({},e,{background:t.payload});case B.mirror:return _({},e,{mirror:e.mirror^t.payload});case B.mode:return _({},e,{mode:t.payload});case B.brush:return _({},e,{brush:t.payload});case B.nextBrush:return _({},e,{brush:y[g[(1+g.indexOf(y[e.brush]))%g.length]]});case B.previousBrush:return _({},e,{brush:y[g[(g.length-1+g.indexOf(y[e.brush]))%g.length]]});case B.size:return _({},e,{size:t.payload});case B.stroke:return _({},e,{stroke:t.payload});case B.rotationalSymmetry:return _({},e,{rotationalSymmetry:t.payload});case B.nextSymmetry:return _({},e,{rotationalSymmetry:N[(1+N.indexOf(e.rotationalSymmetry))%N.length]});case B.previousSymmetry:return _({},e,{rotationalSymmetry:N[(N.length-1+N.indexOf(e.rotationalSymmetry))%N.length]});case B.tool:switch(t.payload){case R.increaseBrushSize:return _({},e,{size:e.size+1});case R.decreaseBrushSize:return _({},e,{size:Math.max(1,e.size-1)})}}return e},palette:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A.color:return F({},e,{palette:V(e.palette,e.paletteIndex,t.payload)});case A.setPaletteColor:return F({},e,{paletteIndex:t.payload.index,palette:V(e.palette,t.payload.index,t.payload.color)});case A.fromPalette:return F({},e,{paletteIndex:t.payload});case B.tool:switch(t.payload){case R.nextColor:return F({},e,{paletteIndex:(e.paletteIndex+1)%e.palette.length});case R.previousColor:return F({},e,{paletteIndex:(e.palette.length+e.paletteIndex-1)%e.palette.length})}}return e},canvas:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case Q.resize:e=Y({},t,{width:Math.max(8,Math.min(256,r.payload)),height:Math.max(8,Math.min(256,r.payload))});break;case Q.resetSize:e=Y({},t,{width:G.width,height:G.height});break;case Q.bucket:e=Y({},t,{pxls:K(t.pxls,r.payload.position,r.payload.color,[t.width,t.height])});break;case Q.setPxl:case Q.setPxls:e=Y({},t,{pxls:ee(Object.assign({},t.pxls,r.payload))});break;case Q.clearPxl:e=Y({},t,{pxls:[r.payload].reduce((function(e,t){return delete e[t],e}),Object.assign({},t.pxls))});break;case Q.clearPxls:e=Y({},t,{pxls:r.payload.reduce((function(e,t){return delete e[t],e}),Object.assign({},t.pxls))});break;case B.tool:switch(r.payload){case R.clear:e=Y({},t,{pxls:{}});break;case R.increaseCanvasSize:e=Y({},t,{width:Math.min(256,t.width+8),height:Math.min(256,t.height+8)});break;case R.decreaseCanvasSize:e=Y({},t,{width:Math.max(8,t.width-8),height:Math.max(8,t.height-8)});break;case R.rotateClockwise:e=Y({},t,{pxls:z(t.pxls,!0,[t.width,t.height])});break;case R.rotateCounterClockwise:e=Y({},t,{pxls:z(t.pxls,!1,[t.width,t.height])});break;case R.flipHorizontally:e=Y({},t,{pxls:D(t.pxls,!1,[t.width,t.height])});break;case R.flipVertically:e=Y({},t,{pxls:D(t.pxls,!0,[t.width,t.height])});break;case R.undo:if(!($>0))return t;e=Z[--$];break;case R.redo:if(!($<Z.length-1))return t;e=Z[++$];break;default:return t}break;default:return t}return Z.includes(e)?Z.includes(t)||Z.push(t):($<Z.length&&(Z=Z.slice(0,$)),Z.push(t),$++),e||t}});function re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?re(Object(r),!0).forEach((function(t){Object(s.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ae(e,t){return C(e)}function oe(e){var t=Object.keys(e)[0];return t&&"#"===t[0]}function ce(e,t){return oe(e)?M(e):e}var ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"app-data",t=arguments.length>1?arguments[1]:void 0,r=t.defaultState,n=void 0===r?{}:r,a=t.dehydrate,o=void 0===a?function(e){return e}:a,c=t.rehydrate,i=void 0===c?function(e){return e}:c,s=t.rateLimit,u=void 0===s?1e3:s;function l(t){var r=d()((function(){localStorage.setItem(e,JSON.stringify(o(t.getState())))}),u);return function(e){return function(t){var n=e(t);return r(),n}}}return[f()({},n,i(JSON.parse(localStorage.getItem(e))||{})),l]}("pxlr",{defaultState:te(void 0,{}),dehydrate:function(e){return ne({},e,{config:ne({},e.config,{mode:v[e.config.mode],brush:y[e.config.brush]}),canvas:ne({},e.canvas,{pxls:ae(e.canvas.pxls,e.canvas.width)})})},rehydrate:function(e){return e.config?ne({},e,{config:ne({},e.config,{mode:v[e.config.mode],brush:y[e.config.brush]}),canvas:ne({},e.canvas,{pxls:ce(e.canvas.pxls,e.canvas.width)})}):{}}}),se=Object(u.a)(ie,2),ue=se[0],le=[se[1]],pe=Object(l.d)(te,ue,l.a.apply(void 0,le)),fe=[].concat(Object(b.a)([].map.call("1234567890",(function(e){return"Digit"+e}))),Object(b.a)([].map.call("qwertyuiopasdfghjklzxcvbnm",(function(e){return"Key"+e.toUpperCase()}))),["Minus","Equal","BracketLeft","BracketRight","Backslash","Semicolon","Quote","Comma","Period","Slash","Backquote","Backspace","Tab","Caps","Enter","ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","Space"]),he=r(5);function de(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return Object.entries(e).reduce((function(e,r,n){var a=Object(u.a)(r,2),o=a[0],c=a[1];return e[n]=t(c,o,n),e}),[])}function be(e){for(var t="",r=0,n=e.length;r<n;r++){var a=e[r].toLowerCase();a===e[r]?t+=a:t+="-"+a}return t}function me(e){for(var t=e[0].toUpperCase(),r=1,n=e.length;r<n;r++){var a=e[r].toLowerCase();a===e[r]?t+=a:t+=" "+e[r]}return t}function ve(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).map((function(e){return"string"===typeof e?e:Object.entries(e).filter((function(e){return Object(u.a)(e,2)[1]})).map((function(e){return Object(u.a)(e,1)[0]})).join(" ")})).join(" ")}var ge=function(e){var t=e.icon;return"string"===typeof t?a.a.createElement(ye,{name:t}):"object"===typeof t&&a.a.createElement(ye,t)};function ye(e){var t,r=e.name,n=e.rotate,o=void 0===n?0:n,c=e.flipV,i=void 0!==c&&c,u=e.flipH,l=void 0!==u&&u,p=e.spin,f=void 0!==p&&p;return a.a.createElement("i",{className:ve((t={icon:!0,mdi:!0},Object(s.a)(t,"mdi-"+r,!0),Object(s.a)(t,"mdi-rotate-"+o,[45,90,135,180,225,270,315].includes(o)),Object(s.a)(t,"mdi-flip-h",l),Object(s.a)(t,"mdi-flip-v",i),Object(s.a)(t,"mdi-spin",f),t))})}function Oe(e,t,r,n){return[t&&"shift",r&&"ctrl",n&&"alt",e].filter(Boolean).toString()}var je={};function Pe(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.shift,o=void 0!==a&&a,c=r.ctrl,i=void 0!==c&&c,s=r.alt,u=void 0!==s&&s,l=r.repeat,p=void 0!==l&&l;Object(n.useEffect)((function(){var r=Oe(e,o,i,u);return t.repeat=p,je[r]=t,function(){return delete je[r]}}),[e,t,o,i,u,p])}function ke(e){var t=e.code,r=e.label,o=void 0===r?t:r,c=e.className,i=void 0===c?"":c,s=e.icon,l=e.children,p=e.prependChildren,f=void 0!==p&&p,h=e.onKey,d=void 0===h?function(e){return e}:h,b=e.onKeyShift,m=void 0===b?function(e){return e}:b,v=e.onKeyCtrl,g=void 0===v?function(e){return e}:v,y=e.onKeyAlt,O=void 0===y?function(e){return e}:y,j=e.isRepeatable,P=void 0!==j&&j,k=e.activeTime,w=void 0===k?250:k,x=Object(he.a)(e,["code","label","className","icon","children","prependChildren","onKey","onKeyShift","onKeyCtrl","onKeyAlt","isRepeatable","activeTime"]),E=Object(n.useState)(!1),S=Object(u.a)(E,2),C=S[0],M=S[1];return Pe(t,Object(n.useMemo)((function(){return function(){d(),M(!0),setTimeout((function(){return M(!1)}),w)}}),[w,d]),{repeat:P}),Pe(t,m,{shift:!0,repeat:P}),Pe(t,g,{ctrl:!0,repeat:P}),Pe(t,O,{alt:!0,repeat:P}),a.a.createElement("label",Object.assign({"data-key":t,className:ve("key",i,C&&"activated"),title:"(".concat(t,") ").concat(o)},x),f&&l,a.a.createElement("span",null,o),a.a.createElement(ge,{icon:s}),!f&&l)}window.addEventListener("keydown",(function(e){if("INPUT"!==document.activeElement.tagName){var t=je[Oe(e.code,e.shiftKey,e.ctrlKey,e.altKey)];if(t){var r=t.repeat;e.repeat&&!r||(e.preventDefault(),t(e))}}else["Escape","Enter","Return"].includes(e.code)&&document.activeElement.blur()}));var we=Object(i.b)((function(e,t){var r=t.index;return{color:e.palette.palette[r],selected:e.palette.paletteIndex===r}}),(function(e,t){var r=t.index;return{update:function(t){return e(function(e,t){return{type:A.setPaletteColor,payload:{index:e,color:t}}}(r,t.target.value))},select:function(){return e(T(r))}}}))((function(e){var t=e.code,r=e.color,n=e.selected,o=e.update,c=e.select,i=e.icon,s=void 0===i?"palette-outline":i;return a.a.createElement(ke,{className:ve("color",n&&"selected"),style:{background:r},code:t,icon:s,label:r,onClick:c,onKey:c,prependChildren:!0},a.a.createElement("input",{type:"color",onChange:o,value:r}))})),xe=r(14),Ee=r.n(xe);function Se(e){var t=e.className,r=e.onClick,n=Object(he.a)(e,["className","onClick"]);return a.a.createElement(ke,Object.assign({className:ve("once",t),onKey:r},n),a.a.createElement("button",{onClick:r}))}var Ce=Object(i.b)(void 0,(function(e,t){var r=t.tool;return{activate:function(){return e(function(e){return{type:B.tool,payload:e}}(r))}}}))((function(e){var t=e.className,r=e.code,n=e.name,o=e.icon,c=e.activate;return a.a.createElement(Se,{className:ve("tool",t),label:Ee()(n),code:r,icon:o,onClick:c})}));function Me(e){var t=e.className,r=e.group,n=e.onSelect,o=e.selected,c=void 0!==o&&o,i=Object(he.a)(e,["className","group","onSelect","selected"]);return a.a.createElement(ke,Object.assign({className:ve("select",t,c&&"selected"),onKey:n},i,{prependChildren:!0}),a.a.createElement("input",{type:"radio",name:r,onChange:n,checked:c}))}var ze=Object(i.b)((function(e,t){var r=t.mode;return{selected:e.config.mode===r}}),(function(e,t){var r=t.mode;return{select:function(){return e(function(e){return{type:B.mode,payload:e}}(r))}}}))((function(e){var t=e.code,r=e.name,n=e.icon,o=e.select,c=e.selected;return a.a.createElement(Me,{className:"mode",group:"mode",label:Ee()(r),code:t,icon:n,onSelect:o,selected:c})}));function De(e){e.value;var t=e.icon,r=e.label,n=e.selected,o=Object(he.a)(e,["value","icon","label","selected"]);return a.a.createElement("label",Object.assign({className:ve("carousel-item key",n&&"active")},o),a.a.createElement(ge,{icon:t}),a.a.createElement("span",null,r))}function Ke(e){var t=e.className,r=e.options,n=e.onNext,o=e.onPrevious,c=e.select,i=e.selectedIndex,s=void 0===i?0:i,u=e.selectedItem,l=void 0===u?r[s]||{}:u,p=e.icon,f=void 0===p?l.icon:p,h=e.label,d=void 0===h?l.label:h,b=Object(he.a)(e,["className","options","onNext","onPrevious","select","selectedIndex","selectedItem","icon","label"]);return a.a.createElement(ke,Object.assign({className:ve("carousel",t),icon:f,label:d,onKey:n,onKeyShift:o,onKeyAlt:function(){return c(r[0].value)}},b),r.map((function(e){return a.a.createElement(De,{key:e.label,selected:l===e,onClick:function(){return c(e.value)},value:e.value,icon:e.icon,label:e.label})})))}var Ne=Object(i.b)((function(e,t){return{selectedItem:t.options.find((function(t){return t.value===e.config.brush}))}}),(function(e){return{onNext:function(){return e({type:B.nextBrush})},onPrevious:function(){return e({type:B.previousBrush})},select:function(t){return e((r=t,{type:B.brush,payload:r}));var r}}}))((function(e){return a.a.createElement(Ke,Object.assign({className:"brush-shape"},e))}));function Re(e){var t=e.className,r=e.onToggle,n=e.checked,o=Object(he.a)(e,["className","onToggle","checked"]);return a.a.createElement(ke,Object.assign({className:ve("toggle",t,n&&"active"),onKey:r},o,{prependChildren:!0}),a.a.createElement("input",{type:"checkbox",onChange:r,checked:n}))}var Be=m(["mirrorVertically","mirrorHorizontally"]),Ie=Object(i.b)((function(e,t){return{checked:t.uid===Be.mirrorVertically?1&e.config.mirror:2&e.config.mirror}}),(function(e,t){var r=t.uid;return{toggle:function(){return e(I(r===Be.mirrorVertically?1:2))}}}))((function(e){var t=e.code,r=e.name,n=e.icon,o=e.checked,c=e.toggle;e.uid;return a.a.createElement(Re,{label:Ee()(r),code:t,icon:n,checked:o,onToggle:c})})),Le=Object(i.b)((function(e,t){return{selectedIndex:t.options.findIndex((function(t){return t.value===e.config.rotationalSymmetry}))}}),(function(e,t){t.options;return{onNext:function(){return e({type:B.nextSymmetry})},onPrevious:function(){return e({type:B.previousSymmetry})},select:function(t){return e((r=t,{type:B.rotationalSymmetry,payload:r}));var r}}}))((function(e){return a.a.createElement(Ke,Object.assign({className:ve("rotational-symmetry",e.selectedIndex&&"active")},e))}));function _e(e){var t=e.inputProps,r=t.min,o=t.max,c=t.step,i=t.value,s=t.onChange,u=t.onKey,l=Object(he.a)(t,["min","max","step","value","onChange","onKey"]),p=e.decreaseProps,f=e.increaseProps,h=(Object(he.a)(e,["inputProps","decreaseProps","increaseProps"]),Object(n.useRef)()),d=Object(n.useMemo)((function(){return function(){h.current&&h.current.focus(),u()}}),[h,u]);return a.a.createElement(n.Fragment,null,a.a.createElement(ke,Object.assign({className:ve("numeric","input"),onKey:d},l),a.a.createElement("input",{type:"number",ref:h,min:r,max:o,step:c,value:i,onChange:s})),a.a.createElement(ke,Object.assign({className:ve("numeric","decrease"),disabled:i===r},p)),a.a.createElement(ke,Object.assign({className:ve("numeric","increase"),disabled:i===o},f)))}function Ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(r),!0).forEach((function(t){Object(s.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Te(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:256,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:8;return Math.max(r,Math.min(n,e+t*a))}var qe=Object(i.b)((function(e){return{size:e.canvas.width}}),(function(e){return{resetSize:function(){return e({type:Q.resetSize})},setSize:function(t){return e(J(t))}}}),(function(e,t,r){var n=e.size,a=t.resetSize,o=t.setSize,c=r.inputProps,i=c.min,s=c.max,u=c.step,l=r.inputProps,p=r.decreaseProps,f=r.increaseProps;return{inputProps:Ae({},l,{value:n,onKey:function(e){return e},onKeyShift:a,onChange:function(e){return o(+e.target.value)}}),decreaseProps:Ae({},p,{onKey:function(){return o(Te(n,-1,i,s,u))},onClick:function(){return o(Te(n,-1,i,s,u))}}),increaseProps:Ae({},f,{onKey:function(){return o(Te(n,1,i,s,u))},onClick:function(){return o(Te(n,1,i,s,u))}})}}))((function(e){var t=e.inputProps,r=e.decreaseProps,n=e.increaseProps;return a.a.createElement(_e,{inputProps:t,decreaseProps:r,increaseProps:n})}));function Fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function He(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(r),!0).forEach((function(t){Object(s.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ve(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:256,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:8;return Math.max(r,Math.min(n,e+t*a))}var Qe=Object(i.b)((function(e){return{size:e.config.size}}),(function(e){return{resetSize:function(){return e({type:B.size,payload:1})},setSize:function(t){return e(function(e){return{type:B.size,payload:e}}(t))}}}),(function(e,t,r){var n=e.size,a=t.resetSize,o=t.setSize,c=r.inputProps,i=c.min,s=c.max,u=c.step,l=r.inputProps,p=r.decreaseProps,f=r.increaseProps;return{inputProps:He({},l,{value:n,onKey:function(e){return e},onKeyShift:a,onChange:function(e){return o(+e.target.value)}}),decreaseProps:He({},p,{onKey:function(){return o(Ve(n,-1,i,s,u))},onClick:function(){return o(Ve(n,-1,i,s,u))}}),increaseProps:He({},f,{onKey:function(){return o(Ve(n,1,i,s,u))},onClick:function(){return o(Ve(n,1,i,s,u))}})}}))((function(e){var t=e.inputProps,r=e.decreaseProps,n=e.increaseProps;return a.a.createElement(_e,{inputProps:t,decreaseProps:r,increaseProps:n})}));function Je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(r),!0).forEach((function(t){Object(s.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Je(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function We(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:256,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:8;return Math.max(r,Math.min(n,e+t*a))}var Ye=Object(i.b)((function(e){return{size:e.config.stroke}}),(function(e){return{resetSize:function(){return e({type:B.stroke,payload:1})},setSize:function(t){return e(function(e){return{type:B.stroke,payload:e}}(t))}}}),(function(e,t,r){var n=e.size,a=t.resetSize,o=t.setSize,c=r.inputProps,i=c.min,s=c.max,u=c.step,l=r.inputProps,p=r.decreaseProps,f=r.increaseProps;return{inputProps:Xe({},l,{value:n,onKey:function(e){return e},onKeyShift:a,onChange:function(e){return o(+e.target.value)}}),decreaseProps:Xe({},p,{onKey:function(){return o(We(n,-1,i,s,u))},onClick:function(){return o(We(n,-1,i,s,u))}}),increaseProps:Xe({},f,{onKey:function(){return o(We(n,1,i,s,u))},onClick:function(){return o(We(n,1,i,s,u))}})}}))((function(e){var t=e.inputProps,r=e.decreaseProps,n=e.increaseProps;return a.a.createElement(_e,{inputProps:t,decreaseProps:r,increaseProps:n})}));function Ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ze(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(r),!0).forEach((function(t){Object(s.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var $e=[{component:Object(i.b)((function(e){return{color:e.config.background}}),(function(e){return{update:function(t){return e((r=t.target.value,{type:B.background,payload:r}));var r}}}))((function(e){var t=e.code,r=e.icon,o=e.color,c=e.update,i=Object(n.useRef)(),s=Object(n.useMemo)((function(){return function(){i.current.click()}}),[i]);return a.a.createElement(ke,{className:"color background-color",style:{color:o},code:t,icon:r,onKey:s,label:"Background Color",prependChildren:!0},a.a.createElement("input",{ref:i,type:"color",onChange:c,value:o}))})),props:{code:"Backquote",icon:"image"}}].concat(Object(b.a)([].map.call("1234567890",(function(e,t){return{component:we,props:{code:"Digit"+e,index:t}}}))),Object(b.a)(de({KeyQ:{mode:v.pencil,icon:"pencil"},KeyW:{mode:v.bucket,icon:"format-color-fill"},KeyE:{mode:v.eraser,icon:"eraser-variant"},KeyA:{mode:v.darken,icon:{name:"brightness-6",flipH:!0}},KeyS:{mode:v.lighten,icon:"brightness-6"},KeyD:{mode:v.dropper,icon:"eyedropper"},KeyZ:{mode:v.invert,icon:"invert-colors"},KeyX:{mode:v.mix,icon:"bowl-mix"}},(function(e,t,r){var n=e.mode,a=e.icon;return{component:ze,props:{code:t,icon:a,mode:n,name:v[n]}}}))),Object(b.a)(de({KeyF:{tool:R.flipVertically,icon:"flip-vertical"},KeyG:{tool:R.flipHorizontally,icon:"flip-horizontal"},Minus:{tool:R.previousColor,icon:"arrow-left-bold",className:"PreviousColor"},Equal:{tool:R.nextColor,icon:"arrow-right-bold",className:"NextColor"},KeyR:{tool:R.rotateCounterClockwise,icon:"format-rotate-90"},KeyT:{tool:R.rotateClockwise,icon:{name:"format-rotate-90",flipH:!0}},Backspace:{tool:R.clear,icon:"trash-can"},KeyU:{tool:R.undo,icon:"undo"},KeyI:{tool:R.redo,icon:"redo"}},(function(e,t,r){var n=e.tool,a=e.icon,o=Object(he.a)(e,["tool","icon"]);return{component:Ce,props:Ze({tool:n,code:t,icon:a,name:me(R[n])},o)}}))),Object(b.a)(de({KeyV:{toggle:Be.mirrorVertically,icon:"reflect-vertical"},KeyB:{toggle:Be.mirrorHorizontally,icon:"reflect-horizontal"}},(function(e,t,r){var n=e.toggle,a=e.icon;return{component:Ie,props:{uid:n,code:t,icon:a,name:me(Be[n])}}}))),[{component:Ne,props:{code:"Tab",options:g.map((function(e){return{value:y[e],icon:be(e),label:me(e)}}))}},{component:Le,props:{code:"KeyC",icon:"rotate-right",options:[0,30,45,60,90,120,180].map((function(e){return{value:e,label:e}}))}},{component:qe,props:{code:["KeyP","BracketLeft","BracketRight"],inputProps:{code:"KeyP",label:"",min:8,max:256,step:8},decreaseProps:{code:"BracketLeft",label:"Smaller Image",icon:"image-size-select-small",isRepeatable:!1},increaseProps:{code:"BracketRight",label:"Bigger Image",icon:"image-size-select-large",isRepeatable:!1}}},{component:Qe,props:{code:["KeyL","Semicolon","Quote"],inputProps:{code:"KeyL",label:"",min:1,step:1,max:128},decreaseProps:{code:"Semicolon",label:"Smaller Brush",icon:"pencil-minus",isRepeatable:!0},increaseProps:{code:"Quote",label:"Bigger Brush",icon:"pencil-plus",isRepeatable:!0}}},{component:Ye,props:{code:["Comma","Period","Slash"],inputProps:{code:"Comma",label:"",min:1,step:1,max:128},decreaseProps:{code:"Period",label:"Smaller Stroke",icon:"pencil-minus-outline",isRepeatable:!0},increaseProps:{code:"Slash",label:"Bigger Stroke",icon:"pencil-plus-outline",isRepeatable:!0}}}]),et=$e.map((function(e){return e.props.code})).flat(),tt=fe.filter((function(e){return!et.includes(e)}));function rt(){return tt.map((function(e,t){return a.a.createElement("label",{key:e,className:"key","data-key":e},a.a.createElement("span",null,function(e){switch(e=e.replace(/Digit|Key/,"")){case"Backquote":return"`";case"Minus":return"-";case"Equal":return"=";case"BracketLeft":return"[";case"BracketRight":return"]";case"Backslash":return"\\";case"Semicolon":return";";case"Quote":return"'";case"Slash":return"/";case"Period":return".";case"Comma":return",";default:return e}}(e)))}))}r(152),r(153);function nt(){return a.a.createElement("div",{className:"keyboard"},$e.map((function(e,t){return a.a.createElement(e.component,Object.assign({key:e.props.code},e.props))})),a.a.createElement(rt,null))}var at=r(23),ot=r(24),ct=r(7),it=r(25),st=r(26),ut=r(15),lt=r(9),pt=r.n(lt),ft=r(35),ht=r.n(ft),dt=function(e){return 2*Math.ceil(1/Math.cos(Math.PI/e))};function bt(e){var t=Object(u.a)(e,2),r=t[0]+4096,n=t[1]+4096,a=r%1,o=n%1,c=Math.floor(r)-4096,i=Math.floor(n)-4096,s=[c,i];s.alpha=(1-a)*(1-o);var l=[s];return a>0&&((s=[c+1,i]).alpha=a*(1-o),l.push(s)),o>0&&((s=[c,i+1]).alpha=(1-a)*o,l.push(s)),a>0&&o>0&&((s=[c+1,i+1]).alpha=a*o,l.push(s)),l}function mt(e,t){var r=t.mode,n=t.brush,a=t.size,o=t.mirror,c=t.width,i=t.height,s=t.stroke,l=t.rotationalSymmetry,p=function(e,t){var r=t.size,n=t.shape,a=t.mode,o=t.stroke;if([v.bucket,v.dropper].includes(a))return[e];var c=Object(u.a)(e,2),i=c[0],s=c[1],l=[Math.floor(i+r/2+.5),Math.floor(s+r/2+.5)];switch(n){case y.square:return j(l,r);case y.circle:return P(l,r);case y.triangle:return k(l,r,3);case y.pentagon:return k(l,r,5);case y.hexagon:return k(l,r,6);case y.octagon:return k(l,r,8);case y.squareOutline:return S(w(E(j(l,r)),E(j(l,Math.max(0,r-2*o)))));case y.circleOutline:return S(w(E(P(l,r)),E(P(l,Math.max(0,r-2*o)))));case y.triangleOutline:return S(w(E(k(l,r,3)),E(k(l,Math.max(0,r-o*dt(3)),3))));case y.pentagonOutline:return S(w(E(k(l,r,5)),E(k(l,Math.max(0,r-o*dt(5)),5))));case y.hexagonOutline:return S(w(E(k(l,r,6)),E(k(l,Math.max(0,r-o*dt(6)),6))));case y.octagonOutline:return S(w(E(k(l,r,8)),E(k(l,Math.max(0,r-o*dt(8)),8))));default:return[e]}}(e,{mode:r,size:a,shape:n,stroke:s}),f=E(p),h=Object(b.a)(p);return o&O.vertical&&h.push.apply(h,Object(b.a)(S(D(f,!0,[c,i])))),o&O.horizontal&&h.push.apply(h,Object(b.a)(S(D(f,!1,[c,i])))),o===O.both&&h.push.apply(h,Object(b.a)(S(D(D(f,!0,[c,i]),!1,[c,i])))),l&&function(){for(var e=[],t=c/2-.5,r=i/2-.5,n=function(n){var a=h.map((function(e){return function(e,t){var r=Object(u.a)(e,2),n=r[0],a=r[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0],c=Object(u.a)(o,2),i=c[0],s=c[1],l=Math.cos(t),p=Math.sin(t);return[i+(n-i)*l-(a-s)*p,s+(n-i)*p+(a-s)*l]}(e,n/180*Math.PI,[t,r])}));e.push.apply(e,Object(b.a)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;return Object.entries(e.reduce((function(e,t){return bt(t).reduce((function(e,t){return e[t]=(e[t]||0)+t.alpha,e}),e)}),{})).reduce((function(e,r){var n=Object(u.a)(r,2),a=n[0],o=n[1];if(o<t)return e;var c=a.split(",").map(Number);return c.alpha=o,e.push(c),e}),[])}(a,.44)))},a=l;a<360;a+=l)n(a);h.push.apply(h,e)}(),h}r(159);function vt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(ut.a)(e);if(t){var a=Object(ut.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(st.a)(this,r)}}function yt(e,t){var r=t.mode,n=t.color,a=t.pxls;return mt(e,t).reduce((function(e,t){switch(r){case v.pencil:e[t]=n;break;case v.eraser:e[t]=null;break;case v.darken:a[t]&&(e[t]=pt()(a[t]).darken(.1).hex());break;case v.lighten:a[t]&&(e[t]=pt()(a[t]).lighten(.1).hex());break;case v.invert:a[t]&&(e[t]=pt()(a[t]).negate().hex());break;case v.mix:a[t]&&(e[t]=pt()(a[t]).mix(pt()(n),.44).hex())}return e}),{})}var Ot=function(e){Object(it.a)(r,e);var t=gt(r);function r(e){var n;return Object(at.a)(this,r),(n=t.call(this,e)).bg=a.a.createRef(),n.canvas=a.a.createRef(),n.cursor=a.a.createRef(),n.mode=a.a.createRef(),n.handlePointerDown=n.handlePointerDown.bind(Object(ct.a)(n)),n.handlePointerUpdate=n.handlePointerUpdate.bind(Object(ct.a)(n)),n.handlePointerUp=n.handlePointerUp.bind(Object(ct.a)(n)),n.handlePointerLeave=n.handlePointerLeave.bind(Object(ct.a)(n)),n.dbPointerUp=ht()(n.handlePointerUp,250),n.pxlCache={},n._mouse=null,n._lastMouse=null,n}return Object(ot.a)(r,[{key:"updateCanvasProps",value:function(){this._ctx=this.canvas.current.getContext("2d"),this._bgCtx=this.bg.current.getContext("2d"),this._cursorCtx=this.cursor.current.getContext("2d");var e=this.canvas.current.getBoundingClientRect(),t=e.width,r=e.height;this._width=t,this._height=r}},{key:"componentDidMount",value:function(){this.updateCanvasProps(),this.paintPxls(),this.paintBg();var e=this.canvas.current;e.addEventListener("pointerdown",this.handlePointerDown),e.addEventListener("pointerrawupdate",this.handlePointerUpdate),e.addEventListener("pointerup",this.handlePointerUp),e.addEventListener("pointerleave",this.handlePointerLeave)}},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this.af),cancelAnimationFrame(this.baf),cancelAnimationFrame(this.maf);var e=this.canvas.current;e.removeEventListener("pointerdown",this.handlePointerDown),e.removeEventListener("pointerrawupdate",this.handlePointerUpdate),e.removeEventListener("pointerup",this.handlePointerUp),e.removeEventListener("pointerleave",this.handlePointerLeave)}},{key:"componentDidUpdate",value:function(e){var t=this,r=(e.size,e.pxls),n=e.width,a=(e.mode,e.brush,e.mirror,e.background);n===this.props.width&&r===this.props.pxls||(cancelAnimationFrame(this.af),this.af=requestAnimationFrame((function(){return t.paintPxls()}))),n===this.props.width&&a===this.props.background||(cancelAnimationFrame(this.baf),this.baf=requestAnimationFrame((function(){return t.paintBg()}))),this.paintCursor(!0)}},{key:"handlePointerDown",value:function(e){3!==e.which&&(this._down=!0,this._moved=!1)}},{key:"handlePointerUp",value:function(e){this._down&&(this.dbPointerUp.cancel(),this._moved&&this.props.mode!==v.dropper?this.update():this.props.pxlClicked(this.pointerToPos([e.offsetX,e.offsetY]),this.props),this._moved=this._down=!1)}},{key:"handlePointerUpdate",value:function(e){var t=this;"touch"===e.pointerType&&this.dbPointerUp(e),this._mouse=[e.offsetX,e.offsetY],this._moved=!0,this._down&&e.target===this.canvas.current&&this.apply([e.offsetX,e.offsetY],!0),cancelAnimationFrame(this.maf),this.maf=requestAnimationFrame((function(){return t.paintCursor()}))}},{key:"handlePointerLeave",value:function(e){this._mouse=null,this.paintCursor()}},{key:"pointerToPos",value:function(e){var t=Object(u.a)(e,2),r=t[0],n=t[1],a=this.props,o=a.width,c=a.height,i=a.mode,s=a.size,l=[v.bucket,v.dropper].includes(i)?1:s;return[Math.floor(r/this._width*o-l/2),Math.floor(n/this._height*c-l/2)]}},{key:"update",value:function(){this.props.updatePxls(this.pxlCache,this.props),this.pxlCache={}}},{key:"apply",value:function(e){var t=this,r=this.pointerToPos(e),n=yt(r,this.props);this.pxlCache=Object.assign({},this.pxlCache,n),cancelAnimationFrame(this.paf),this.paf=requestAnimationFrame((function(){return t.paintPxls(t.pxlCache)}))}},{key:"getPxls",value:function(){return Object.assign({},this.props.pxls,this.pxlCache)}},{key:"paintBg",value:function(){var e=this.props,t=e.width,r=e.height,n=e.background,a=e.backgroundHatching,o=this._bgCtx;o.fillStyle=n,o.fillRect(0,0,t,r),o.fillStyle=pt()(a).alpha(.25);for(var c=0;c<t;c++)for(var i=0;i<r;i++)i%2+c%2===1&&o.fillRect(i,c,1,1)}},{key:"paintPxls",value:function(e){var t=this.props,r=t.width,n=t.height,a=e||this.getPxls(),o=this._ctx;e||o.clearRect(0,0,r,n),Object.entries(a).forEach((function(e){var t=Object(u.a)(e,2),r=t[0],n=t[1],a=r.split(",").map(Number),c=Object(u.a)(a,2),i=c[0],s=c[1];if(!n)return o.clearRect(i,s,1,1);o.fillStyle=n,o.fillRect(i,s,1,1)}))}},{key:"paintCursor",value:function(e){var t=this.props,r=t.width,n=t.size,a=t.mode,o=t.background,c=t.backgroundHatching,i=pt()(c),s=this._cursorCtx,l=this._width/r,p=![v.bucket,v.dropper].includes(a),f=p?n*l:l;!e&&this._lastMouse?p&&mt(this.pointerToPos(this._lastMouse),this.props).forEach((function(e){var t=Object(u.a)(e,2),r=t[0],n=t[1];return s.clearRect(r,n,1,1)})):s.clearRect(0,0,r,r);if(this._mouse){this._lastMouse=this._mouse;var h=this.pointerToPos(this._mouse),d=h.map((function(e){return e*l})),b=Object(u.a)(d,2),m=b[0],g=b[1];p&&Object.entries(yt(h,this.props)).forEach((function(e){var t=Object(u.a)(e,2),r=t[0],n=t[1],c=r.split(",").map(Number),l=Object(u.a)(c,2),p=l[0],f=l[1];n?s.fillStyle=n:a===v.eraser?(s.fillStyle=o,p%2+f%2===1&&(s.fillRect(p,f,1,1),s.fillStyle=i.alpha(.25))):s.fillStyle=i.alpha(.5),s.fillRect(p,f,1,1)}));var y=this.mode.current,O=m,j=g;y.style.top=j+"px",y.style.left=O+"px",y.style.width=f+"px",y.style.height=f+"px",a===v.dropper?y.style.background=this.props.pxls[h]||"":y.style.background=""}}},{key:"render",value:function(){var e,t=this.props,r=t.width,n=t.height,o=t.mode;switch(o){case v.pencil:e="pencil";break;case v.bucket:e="format-color-fill";break;case v.eraser:e="eraser-variant";break;case v.darken:e="brightness-6 mdi-flip-h";break;case v.lighten:e="brightness-6";break;case v.dropper:e="eyedropper";break;case v.invert:e="invert-colors";break;case v.mix:e="bowl-mix"}return a.a.createElement("div",{id:"container"},a.a.createElement("canvas",{id:"background",ref:this.bg,width:r,height:n}),a.a.createElement("canvas",{id:"canvas",ref:this.canvas,width:r,height:n}),a.a.createElement("canvas",{id:"cursor",ref:this.cursor,width:r,height:n}),a.a.createElement("span",{id:"mode",className:v[o],ref:this.mode},a.a.createElement(ye,{name:e})))}}]),r}(n.Component);Ot.defaultProps={backgroundHatching:"#777"};var jt=Object(i.b)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(r),!0).forEach((function(t){Object(s.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e.canvas,{},e.config,{},e.palette,{color:e.palette.palette[e.palette.paletteIndex]})}),(function(e){return{pxlClicked:function(t,r){var n=r.mode,a=r.color,o=r.palette,c=r.pxls;switch(n){case v.pencil:case v.eraser:case v.darken:case v.lighten:case v.invert:case v.mix:return e(X(yt(t,r)));case v.dropper:if(c[t])return o.includes(c[t])?e(T(o.indexOf(c[t]))):e(function(e){return{type:A.color,payload:e}}(c[t]));break;case v.bucket:return e(function(e,t){return{type:Q.bucket,payload:{position:e,color:t}}}(t,a))}},updatePxls:function(t){e(X(t))}}}))(Ot),Pt=Object(i.b)((function(e){return{width:e.canvas.width,height:e.canvas.height}}))((function(e){var t=e.width;e.height;return a.a.createElement("div",{className:"side-length"},a.a.createElement("span",null,t))})),kt=r(63),wt=r.n(kt);r(162);function xt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(ut.a)(e);if(t){var a=Object(ut.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(st.a)(this,r)}}function Et(e){var t=document.createElement("canvas"),r=t.getContext("2d"),n=e.width,a=e.height;return t.width=n,t.height=a,r.drawImage(e,0,0,n,a),r.getImageData(0,0,n,a)}function St(e){var t=e.data,r=e.width;e.height;return wt()(t,4).reduce((function(e,t,n){var a=Object(u.a)(t,4),o=a[0],c=a[1],i=a[2],s=a[3],l=n%r,p=Math.floor(n/r);return 0===s||(e[[l,p]]=[o,c,i,s].reduce((function(e,t){return e+t.toString(16).padStart(2,"0")}),"#")),e}),{})}var Ct=m(["ready","waiting","processing","error","success"]),Mt=function(e){Object(it.a)(r,e);var t=xt(r);function r(e){var n;return Object(at.a)(this,r),(n=t.call(this,e)).handleChange=n.handleChange.bind(Object(ct.a)(n)),n.handleDragEnter=n.handleDragEnter.bind(Object(ct.a)(n)),n.state={status:Ct.ready},n}return Object(ot.a)(r,[{key:"setStatus",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t?setTimeout(this.setState.bind(this,{status:e}),t):this.setState({status:e})}},{key:"componentDidMount",value:function(){window.addEventListener("dragenter",this.handleDragEnter)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragenter",this.handleDragEnter)}},{key:"handleDragEnter",value:function(e){this.setStatus(Ct.waiting)}},{key:"handleChange",value:function(e){var t=this;this.setStatus(Ct.processing);var r,n,a=e.target;(n=a.files[0],new Promise((function(e,t){try{var r=new FileReader;r.addEventListener("load",(function(){var t=new Image,r=this.result;t.onload=function(){return e(t)},t.src=r})),r.readAsDataURL(n)}catch(a){t(a)}}))).then((r=256,function(e){if(e.width>r)throw new Error("The size of the image is too damn high!");return e})).then(Et).then((function(e){return t.props.resize(e.width),e})).then(St).then(this.props.setPxls).then((function(){return t.setStatus(Ct.success,400)})).catch((function(e){return t.setStatus(Ct.error,400)})).finally((function(){a.value="",t.setStatus(Ct.ready,1600)}))}},{key:"render",value:function(){var e=this.props,t=e.waitingMessage,r=e.processingMessage,n=e.successMessage,o=e.errorMessage;return a.a.createElement("label",{className:ve(Object(s.a)({"file-import":!0},Ct[this.state.status],!0))},a.a.createElement("section",{className:"waiting-msg"},t),a.a.createElement("section",{className:"processing-msg"},r),a.a.createElement("section",{className:"success-msg"},n),a.a.createElement("section",{className:"error-msg"},o),a.a.createElement("input",{onChange:this.handleChange,accept:"image/*",type:"file"}))}}]),r}(n.Component);Mt.defaultProps={waitingMessage:"Drop your file here.",processingMessage:"Processing your file.",successMessage:"Successfully processed.",errorMessage:"There was an error while processing your file."};var zt=Object(i.b)(null,(function(e){return{setPxls:function(t){return e(X(t))},resize:function(t){return e(J(t))}}}))(Mt);function Dt(e){return a.a.createElement(i.a,{store:pe},a.a.createElement(nt,null),a.a.createElement("span",{className:"save-notice"},"(right click on the image to save it)"),a.a.createElement(jt,null),a.a.createElement(Pt,null),a.a.createElement(zt,{waitingMessage:"Present your sacrifice...",processingMessage:"Consuming...",successMessage:"Delicious!",errorMessage:"Disgusting!"}))}c.a.render(a.a.createElement(Dt,null),document.getElementById("root"))},64:function(e,t,r){e.exports=r(163)},71:function(e,t,r){}},[[64,1,2]]]);
//# sourceMappingURL=main.47bcf0d3.chunk.js.map